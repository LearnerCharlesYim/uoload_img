<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>上传图片</title>
    <!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">

<!-- 可选的 Bootstrap 主题文件（一般不用引入） -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap-theme.min.css" integrity="sha384-6pzBo3FDv/PJ8r2KRkGHifhEocL+1X2rVCTTkUfGk7/0pbek5mMa1upzvWbrUbOZ" crossorigin="anonymous">
<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
<script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script>
</head>
<body>
<form action="" method="post" enctype="multipart/form-data">
    <input type="file" name="thumbnail">
    <input type="submit" value="上传">
</form>
<div style="overflow: hidden">
   <div style="float: left;margin-top: 20px;height: 400px;width: 300px;border: 1px solid #000000">
        {% if thumbnail %}
        <img id="img" date-id="{{ thumbnail }}" style="width: 100%;height: 100%" src="/media/{{ thumbnail }}" alt="">
        {% endif %}
    </div>
    <div style="margin-left: 30px;float: left;width: 400px;height: 400px">
        <p>选择尺寸</p>
        <div class="radio">
              <label>
                <input type="radio" name="optionsRadios" id="one-radio" value="1" checked>
                一寸  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;     25×35mm &nbsp;  295×413px
              </label>
        </div>
        <div class="radio">
              <label>
                <input type="radio" name="optionsRadios" id="one-more-radio" value="2" >
                 大一寸 &nbsp;  33×48mm &nbsp;  389×566px
              </label>
        </div>
         <div class="radio">
              <label>
                <input type="radio" name="optionsRadios" id="less-two-radio" value="3">
                小二寸 &nbsp;  35×45mm &nbsp;  413×531px
              </label>
            </div>
        <br>
        <p>选择底色</p>
        <button id="white-btn" style="float:left; height: 20px;width: 20px;" type="button" class="btn btn-default"></button>
        <button id="red-btn" style="float:left; height: 20px;width: 20px;margin-left: 10px;" type="button" class="btn btn-danger"></button>
        <button id="blue-btn" style="float:left; height: 20px;width: 20px;margin-left: 10px;" type="button" class="btn btn-primary"></button>

    </div>

</div>


<script>
    $(function () {
        $('#white-btn').click(function () {
            var self = $('#img');
            var data_id = self.attr('data-id');
            self.attr('src','/media/load.png');

            $.ajax({
                url:'/modify/',
                type:'POST',
                data:{
                    'color':'white',
                    'name':data_id
                },
                success:function (data) {
                    let name = data['name'];
                    self.attr('src','/media/'+name);

                }
            })

        })
    });

    $(function () {
        $('#red-btn').click(function () {
            var self = $('#img');
            var data_id = self.attr('data-id');
            self.attr('src','/media/load.png');

            $.ajax({
                url:'/modify/',
                type:'POST',
                data:{
                    'color':'white',
                    'name':data_id
                },
                success:function (data) {
                    let name = data['name'];
                    self.attr('src','/media/'+name);
                }
            })

        })
    });

    $(function () {
        $('#blue-btn').click(function () {
            var self = $('#img');
            var data_id = self.attr('data-id');
            self.attr('src','/media/load.png');

            $.ajax({
                url:'/modify/',
                type:'POST',
                data:{
                    'color':'white',
                    'name':data_id
                },
                success:function (data) {
                    let name = data['name'];
                    self.attr('src','/media/'+name);

                }
            })

        })
    });

    $(document).ready(function() {
    $('input[type=radio][name=optionsRadios]').change(function() {

        var data_id = $('#img').attr('data-id');
        $('#img').attr('src','/media/load.png');
        var self = this;
        var size;
        if(self.value === '1'){
            size = 1
        }else if(self.value === '2'){
            size = 2
        }else if(self.value ==='3'){
            size = 3
        }
        $.ajax({

            url:'/modify/',
            type:'POST',
            data:{
                'size':size,
                'name':data_id
            },
            success:function (data) {
                let name = data['name'];
                $('#img').attr('src','/media/'+name);
            }
        })

    });
});
</script>


</body>
</html>